FROM node:22-slim

WORKDIR /app

# Copy package files
COPY package*.json ./

# Install dependencies
RUN npm ci

# Copy source (mounted as volume in dev, but needed for initial setup)
COPY . .

# Expose port
EXPOSE 4200

# Run Angular dev server with live reload
# --host 0.0.0.0: Allow connections from outside container
# --poll 2000: Enable polling for file changes (needed in Docker)
CMD ["npm", "run", "start", "--", "--host", "0.0.0.0", "--poll", "2000"]
